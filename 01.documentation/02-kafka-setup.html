<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>Kafka&colon; Setup and CLI &lpar;Command Line Interface&rpar;</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="kafka-setup-and-cli-command-line-interface">Kafka: Setup and CLI (Command Line Interface)</h1>
<h2 id="0-resources">0. Resources</h2>
<table>
<thead>
<tr>
<th>Service</th>
<th>Port</th>
<th>Info</th>
</tr>
</thead>
<tbody>
<tr>
<td>Kafka</td>
<td>9092</td>
<td>Default port</td>
</tr>
<tr>
<td>Zookeeper</td>
<td>2181</td>
<td>Default port</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="1-kafka-install-kafka-conductor-docker-setup-and-local-cli-in-progress">1. Kafka: Install Kafka (Conductor) docker setup and local CLI (<em>In progress</em>)</h2>
<ul>
<li><strong><ins>About / Introduction</ins></strong>
<ul>
<li>Setup <code>Conduktor Kafka</code> in local docker.</li>
</ul>
</li>
<li><strong><ins>Steps</ins></strong>
<ul>
<li><em><strong>Project Setup:</strong></em> Make sure Java SDK 11 or higher is installed and is updated in PATH.</li>
<li><em><strong>Step-1:</strong></em> Install <code>Conducktor</code> in docker.
<ul>
<li>Download <em>docker-compose.yml</em>
<ul>
<li>[curl -L <a href="https://releases.conduktor.io/quick-start">https://releases.conduktor.io/quick-start</a> -o docker-compose.yml](curl -L <a href="https://releases.conduktor.io/quick-start">https://releases.conduktor.io/quick-start</a> -o docker-compose.yml)</li>
</ul>
</li>
</ul>
</li>
<li><em><strong>Step-2:</strong></em> Start the services
<ul>
<li><code>docker compose up -d --wait</code>
<ul>
<li><strong>-d:</strong> Detached mode: Run containers in the background.</li>
<li><strong>--wait:</strong> Wait for services to be running|healthy. Implies detached mode.</li>
</ul>
</li>
</ul>
</li>
<li><em><strong>Step-3:</strong></em> Launch Service.
<ul>
<li>Go to <em><strong><a href="http://localhost:8080/">http://localhost:8080/</a></strong></em>
<ul>
<li>Requires <em>sign-up</em> for first  time login.</li>
</ul>
</li>
</ul>
</li>
<li><em><strong>Step-4:</strong></em> <em>Kafka Local Binary/executables setup</em>
<ul>
<li>Download latest kafka binaries from <a href="https://kafka.apache.org/downloads">https://kafka.apache.org/downloads</a>.</li>
<li><strong>Extract</strong> it to local and <strong>set the path</strong> <em>(preferebly in ~/.profile file)</em> to it's bin directory.</li>
</ul>
</li>
<li><em><strong>Step-5:</strong></em> Starting <em>Zookeeper server</em>
<ul>
<li><strong>Command:</strong> <em><a href="http://zookeeper-server-start.sh">zookeeper-server-start.sh</a> /path/to/kafka-2.13-3.9.0/config/zookeeper.properties</em>
<ul>
<li>Zookeeper requires <em>zookeeper.properties</em> file to start/boot.</li>
<li>We can use the default <em>zookeeper.properties</em> available as part of <em>kafka-executables</em>.</li>
<li>Change the <strong>Default Data directory</strong> <em>dataDir=/tmp/zookeeper</em> in <em>zookeeper.properties</em>, the directory where the snapshot is stored.</li>
</ul>
</li>
</ul>
</li>
<li><em><strong>Step-6:</strong></em> Starting Kafka Server
<ul>
<li><strong>Command:</strong> <em><a href="http://kafka-server-start.sh">kafka-server-start.sh</a> /path/to/kafka-2.13-3.9.0/config/server.properties</em>
<ul>
<li>Change the <strong>Default logs directory</strong> <em>log.dirs=/tmp/kafka-logs</em> in <em>server.properties</em>
<ul>
<li>It accets a comma separated list of directories under which to store log files.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><em><strong>Step-7:</strong></em> Stopping servers.
<ul>
<li><strong>First</strong> stop Kafka server.</li>
<li><strong>Second</strong> stop Zookeeper server.</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>Note: Trobleshoot connectivity issues on Windows WSL 2 <a href="https://docs.conduktor.io/desktop/kafka-cluster-connection/setting-up-a-connection-to-kafka/connecting-to-kafka-running-on-windows-wsl-2/">Connecting-to-kafka-running-on-windows-wsl-2/</a>.</p>
</blockquote>
<ul>
<li><strong><ins>References:</ins></strong>
<ul>
<li><a href="https://conduktor.io/get-started">https://conduktor.io/get-started</a></li>
<li><a href="https://learn.conduktor.io/kafka/how-to-install-apache-kafka-on-linux/#How-to-install-Kafka-with-Zookeeper-on-Linux-0">https://learn.conduktor.io/kafka/how-to-install-apache-kafka-on-linux/#How-to-install-Kafka-with-Zookeeper-on-Linux-0</a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="2-kafka-install-kafka-with-kraft-without-zookeeper">2. Kafka: Install Kafka with KRAFT (without Zookeeper)</h2>
<ul>
<li><strong><ins>About / Introduction</ins></strong>
<ul>
<li>Start Kafaka server using KRAFT (without Zookeeper)</li>
</ul>
</li>
<li><strong><ins>Steps</ins></strong>
<ul>
<li><em><strong>Project Setup:</strong></em> Some change/step</li>
<li><em><strong>Step-1:</strong></em> Generate a new <em>Cluster UUID</em>.
<ul>
<li><strong>Command:</strong> <code>kafka-storage.sh random-uuid</code></li>
</ul>
</li>
<li><em><strong>Step-2:</strong></em> Format the storage (Log Directories).
<ul>
<li><strong>Command:</strong> <code>kafka-storage.sh format -t Nl0GbGlqReSzOsMirclqoQ -c /path/to/kafka-2.13-3.9.0/config/kraft/server.properties</code></li>
</ul>
</li>
<li><em><strong>Step-3:</strong></em> Start Kafka Server using KRAFT configuration properties.
<ul>
<li><strong>Command:</strong> <code>kafka-server-start.sh /path/to/kafka-2.13-3.9.0/config/kraft/server.properties</code></li>
</ul>
</li>
<li><em><strong>Step-4:</strong></em> Stopping kafka server
<ul>
<li>Press <code>Ctrl + C</code> in terminal.</li>
</ul>
</li>
</ul>
</li>
<li><strong><ins>References:</ins></strong>
<ul>
<li><a href="https://learn.conduktor.io/kafka/how-to-install-apache-kafka-on-linux-without-zookeeper-kraft-mode/">https://learn.conduktor.io/kafka/how-to-install-apache-kafka-on-linux-without-zookeeper-kraft-mode/</a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="3-kafka-topics-cli-kafka-topicssh">3. Kafka Topics CLI: <em><a href="http://kafka-topics.sh">kafka-topics.sh</a></em></h2>
<ul>
<li><strong><ins>About / Introduction</ins></strong>
<ul>
<li>Connecting to Kafka in docker using Kafka CLI commands.</li>
</ul>
</li>
<li><strong><ins>Steps</ins></strong>
<ul>
<li><em><strong>Project Setup:</strong></em>
<ul>
<li>Ensure all <em>Zookeeper (Step-5)</em> and <em>Kafka (Step-6)</em> servers are up and running.</li>
<li><strong>Refer,</strong> <em>Section-1</em> for setup process.</li>
</ul>
</li>
<li><em><strong>Step-1:</strong></em> List topics in kafka server.
<ul>
<li><strong>List all topics (just names):</strong> <em><a href="http://kafka-topics.sh">kafka-topics.sh</a> --bootstrap-server localhost:19092 --list</em></li>
<li><strong>List all topics (with config details):</strong> <em><a href="http://kafka-topics.sh">kafka-topics.sh</a> --bootstrap-server localhost:19092 --describe</em></li>
</ul>
</li>
<li><em><strong>Step-2:</strong></em> Create a new topic
<ul>
<li><strong>Create topic:</strong>
<ul>
<li><strong>IPv4:</strong> <em><a href="http://kafka-topics.sh">kafka-topics.sh</a> --bootstrap-server localhost:9092 --topic first_topic --create</em></li>
<li><strong>IPv6:</strong> <em><a href="http://kafka-topics.sh">kafka-topics.sh</a> --bootstrap-server [::1]:9092 --topic first_topic --create</em></li>
</ul>
</li>
<li><strong>Note:</strong>
<ul>
<li><em>WARNING: Due to limitations in metric names, topics with a period ('.') or underscore ('_') could collide.</em></li>
<li><em>To avoid issues it is best to use either, but not both.</em></li>
<li><strong>Troubleshooting:</strong>
<ul>
<li><em>Error:</em> <em>[2025-01-06 10:55:26,226] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Node may not be available. (org.apache.kafka.clients.NetworkClient)</em></li>
<li><em><strong>Remediation:</strong></em> Add below lister configuration in <em>/path/to/kafka/config/server.properties</em></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><em><strong>Step-3:</strong></em> Create topic with # partition config</li>
<li><strong>Create topic with defined partitions:</strong>
<ul>
<li><strong>IPv4:</strong> <em><a href="http://kafka-topics.sh">kafka-topics.sh</a> --bootstrap-server localhost:9092 --topic second_topic --create --partitions 3</em></li>
<li><strong>IPv6:</strong> <em><a href="http://kafka-topics.sh">kafka-topics.sh</a> --bootstrap-server [::1]:9092 --topic second_topic --create --partitions 3</em></li>
</ul>
</li>
<li><em><strong>Step-4:</strong></em> Create topic with replication factor.
<ul>
<li><strong>Create topic with defined partitions and replicas</strong>
<ul>
<li><strong>IPv4:</strong> <em><a href="http://kafka-topics.sh">kafka-topics.sh</a> --bootstrap-server localhost:9092 --topic third_topic --create --partitions 3 --replication-factor 1</em></li>
<li><strong>IPv6:</strong> <em><a href="http://kafka-topics.sh">kafka-topics.sh</a> --bootstrap-server [::1]:9092 --topic third_topic --create --partitions 3 --replication-factor 1</em></li>
<li><strong>Note:</strong>
<ul>
<li><em>Replication factor should not be greater than available brokers</em></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><em><strong>Step-5:</strong></em> Delete a topic
<ul>
<li><strong>IPv4:</strong> <em><a href="http://kafka-topics.sh">kafka-topics.sh</a> --bootstrap-server localhost:9092 --topic first_topic --delete</em></li>
<li><strong>IPv6:</strong> <em><a href="http://kafka-topics.sh">kafka-topics.sh</a> --bootstrap-server [::1]:9092 --topic first_topic --delete</em></li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>Note:</strong> Replace <code>localhost</code> with <code>[::1]</code> if using IPv6.</p>
</blockquote>
<ul>
<li><strong><ins>All Commands:</ins></strong><pre><code class="language-sh">  <span class="hljs-comment">############################</span>
  <span class="hljs-comment">#####     LOCALHOST    #####</span>
  <span class="hljs-comment">############################</span>

  <span class="hljs-comment"># ****Note: Replace `localhost` with `[::1]` if using IPv6</span>

  <span class="hljs-comment"># List all topics in Kafka server</span>
  kafka-topics.sh --bootstrap-server localhost:9092 --list 
  kafka-topics.sh --bootstrap-server [::1]:9092 --list

  <span class="hljs-comment"># Describe all topics in Kafka server with configuration details</span>
  kafka-topics.sh --bootstrap-server localhost:19092 --describe
  kafka-topics.sh --bootstrap-server [::1]:19092 --describe

  <span class="hljs-comment"># Describe specific topic in Kafka server with configuration details</span>
  kafka-topics.sh --bootstrap-server localhost:9092 --topic first_topic --describe
  kafka-topics.sh --bootstrap-server [::1]:9092 --topic first_topic --describe

  <span class="hljs-comment"># Create topic named `first_topic`</span>
  kafka-topics.sh --bootstrap-server localhost:9092 --topic first_topic --create
  kafka-topics.sh --bootstrap-server [::1]:9092 --topic first_topic --create

  <span class="hljs-comment"># Create a topic with name `second_topic` with 3 partitions</span>
  kafka-topics.sh --bootstrap-server localhost:9092 --topic second_topic --create --partitions 3
  kafka-topics.sh --bootstrap-server [::1]:9092 --topic second_topic --create --partitions 3

  <span class="hljs-comment"># Create a topic with name `third_topic` with 3 partitions and 2 replicas</span>
  <span class="hljs-comment"># Faile in local: Replication factor should not be greater than available brokers.</span>
  kafka-topics.sh --bootstrap-server localhost:9092 --topic third_topic --create --partitions 3 --replication-factor 2
  kafka-topics.sh --bootstrap-server [::1]:9092 --topic third_topic --create --partitions 3 --replication-factor 2

  <span class="hljs-comment"># Create a topic (working)</span>
  kafka-topics.sh --bootstrap-server localhost:9092 --topic third_topic --create --partitions 3 --replication-factor 1
  kafka-topics.sh --bootstrap-server [::1]:9092 --topic third_topic --create --partitions 3 --replication-factor 1

  <span class="hljs-comment"># Delete a topic </span>
  kafka-topics.sh --bootstrap-server localhost:9092 --topic first_topic --delete
  kafka-topics.sh --bootstrap-server [::1]:9092 --topic first_topic --delete

  <span class="hljs-comment"># (only works if delete.topic.enable=true)</span>
</code></pre>
</li>
</ul>
<blockquote>
<p>Note: This is an <em><strong>important</strong></em> note.</p>
</blockquote>
<ul>
<li>
<p><strong><ins>Notes:</ins></strong></p>
<ul>
<li>Some important key point / takeaway note.</li>
<li>Some takeaway:
<ul>
<li>Sub topic takeaway.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong><ins>Pros &amp; Cons</ins></strong></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pros 1</td>
<td>Cons 1</td>
</tr>
<tr>
<td>Pros 2</td>
<td>Cons 2</td>
</tr>
</tbody>
</table>
<ul>
<li><strong><ins>References:</ins></strong>
<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi/blob/main/springdoc-openapi-starter-webmvc-ui/pom.xml">https://github.com/springdoc/springdoc-openapi/blob/main/springdoc-openapi-starter-webmvc-ui/pom.xml</a></li>
</ul>
</li>
</ul>
<hr>

            
            
        </body>
        </html>